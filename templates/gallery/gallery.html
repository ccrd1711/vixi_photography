{% extends 'base.html' %}
{% load static %}
{% block title %}Gallery • Vixi Photography{% endblock %}
{% block body_class %}gallery-scope{% endblock %}

{% block content %}

<div class="gallery-page" id="galleryPage">
  <div class="gallery-toolbar">
    <h1 class="m-0">Gallery</h1>
      <div class="gallery-intro">
        <p>Explore my first and therefore most recent gallery of photos below in both <strong>Colour</strong> and <strong>Black &amp; White</strong>.  
        Use the toggle button below to switch between light and dark modes, choose your preferred version when adding to your basket,  
        and after checkout you’ll receive a <strong>high-quality digital download</strong> of your chosen photos. 
        </p>
      </div>
  </div>

  <div class="toggle-row">
    <button id="galleryModeToggle" class="dark-btn" aria-pressed="false" title="Toggle theme">☾</button>
  </div>

  {% if photos %}
    <div class="grid">
  {% for photo in photos %}
    <article class="card">
      <img src="{% static photo.image_url %}" alt="{{ photo.title|default:'Photo' }}" class="card-img">
      <div class="card-body">
        <h3 class="card-title">{{ photo.title|default:"Untitled" }}</h3>
        <p class="price">{{ photo.price_display }}</p>
        <form action="{% url 'add_to_cart' photo.id %}" method="post">
          {% csrf_token %}
          <label for="v{{ photo.id }}" class="sr-only">Format</label>
          <select id="v{{ photo.id }}" name="variant">
            <option value="colour">Colour</option>
            <option value="bw">Black & White</option>
          </select>
          <input type="hidden" name="next" value="{{ request.get_full_path }}">
          <button class="basket-btn" type="submit">Add to basket</button>
        </form>
      </div>
    </article>
  {% endfor %}
</div>

  {% else %}
    <p>No photos yet.</p>
  {% endif %}
</div>

<script src="{% static 'js/gallery.js' %}"></script>
{% endblock %}
